rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /content/{contentId} {
      // Public can read
      allow read: if true;

      // Only authenticated users can write (for future when auth is implemented)
      // For now, allow all writes since app doesn't use Firebase Auth yet
      allow write: if true;
    }

    match /users/{userId} {
      // Allow read for authentication verification
      allow read: if true;

      // Allow write for user profile creation and session management
      // Note: Since app uses Student ID validation instead of Firebase Auth,
      // we allow writes without auth check. Consider implementing Firebase Auth
      // with anonymous sign-in for better security.
      allow write: if true;
    }

    // Allow read/write for user subcollections (lectures, questionSets, etc.)
    match /users/{userId}/{subcollection=**} {
      allow read, write: if true;
    }
  }
}
